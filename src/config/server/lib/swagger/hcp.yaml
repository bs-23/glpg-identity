paths:
    /api/hcp-profiles/registration-lookup:
        post:
            tags:
                - hcp-profiles
            summary: Retrieve HCP user's details by uuid and email.
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            properties:
                                email:
                                    type: string
                                uuid:
                                    type: string
                            required:
                              - uuid
                              - email
            responses:
                200:
                    description: The request has succeeded.
                    content:
                        applicaiton/json:
                            schema:
                                type: object
                                properties:
                                    data:
                                        $ref: "#/components/schemas/hcpProfile"
                                    errors:
                                        $ref: "#/components/schemas/errorBodyInSuccess"
                400:
                    description: Bad request.
                    content:
                        applicaiton/json:
                            schema:
                                $ref: "#/components/schemas/errorResponse"

    /api/hcp-profiles:
        post:
            tags:
                - hcp-profiles
            summary: Create a new HCP user profile.
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/createHcpProfile"
            responses:
                200:
                    description: The request has succeeded.
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    data:
                                        $ref: "#/components/schemas/hcpProfile"
                                    errors:
                                        $ref: "#/components/schemas/errorBodyInSuccess"

                401:
                    description: User is not authenticated.
                400:
                    description: Bad request
                    content:
                        applicaiton/json:
                            schema:
                                $ref: "#/components/schemas/errorResponse"

    /api/hcp-profiles/confirm-consents:
        post:
            tags:
                - hcp-profiles
            summary: Confirms consents of a HCP user.
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/confirmConsent"
            responses:
                200:
                    description: The request has succeeded.
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    data:
                                        $ref: "#/components/schemas/hcpProfileWithToken"
                                    errors:
                                        $ref: "#/components/schemas/errorBodyInSuccess"

                400:
                    description: Bad request
                    content:
                        applicaiton/json:
                            schema:
                                $ref: "#/components/schemas/errorResponse"

    /api/hcp-profiles/reset-password:
        put:
            tags:
                - hcp-profiles
            summary: Reset HCP user's password.
            parameters:
                - name: token
                  in: query
                  required: true
                  description: Password reset token
                  schema:
                    type: string
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/resetHcpPassword"
            responses:
                200:
                    description: The request has succeeded.
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    data:
                                        type: object
                                        properties:
                                            is_firsttime_setup:
                                                type: string
                                            message:
                                                type: string
                                    errors:
                                        $ref: "#/components/schemas/errorBodyInSuccess"
                401:
                    description: User is not authenticated.
                404:
                    description: HCP user profile not found.
                    content:
                        applicaiton/json:
                            schema:
                                $ref: "#/components/schemas/errorResponse"
                400:
                    description: Invalid request, password mismatch or invalid token.
                    content:
                        applicaiton/json:
                            schema:
                                $ref: "#/components/schemas/errorResponse"

    /api/hcp-profiles/forget-password:
        post:
            tags:
                - hcp-profiles
            summary: Get new reset password token.
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            properties:
                                email:
                                    type: string
                            required:
                                - email
            responses:
                200:
                    description: The request has succeeded.
                    content:
                        applicaiton/json:
                            schema:
                                type: object
                                properties:
                                    data:
                                        type: object
                                        properties:
                                            password_reset_token:
                                                type: string
                                            user_id:
                                                type: string
                                            message:
                                                type: string
                                    errors:
                                        $ref: "#/components/schemas/errorBodyInSuccess"
                401:
                    description: User is not authenticated.
                404:
                    description: HCP user profile not found.
                    content:
                        applicaiton/json:
                            schema:
                                $ref: "#/components/schemas/errorResponse"

    /api/hcp-profiles/change-password:
        put:
            tags:
                - hcp-profiles
            summary: Change HCP user's password.
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: "#/components/schemas/changeHcpPassword"
            responses:
                200:
                    description: The request has succeeded.
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    data:
                                        type: string
                                    errors:
                                        $ref: "#/components/schemas/errorBodyInSuccess"
                401:
                    description: Invalid credential.
                    content:
                        applicaiton/json:
                            schema:
                                $ref: "#/components/schemas/errorResponse"
                400:
                    description: Invalid request parameters or password mismatch.
                    content:
                        applicaiton/json:
                            schema:
                                $ref: "#/components/schemas/errorResponse"

    /api/hcp-profiles/{id}:
        get:
            tags:
                - hcp-profiles
            summary: Get HCP user's profile by id.
            parameters:
                - name: id
                  in: path
                  required: true
                  description: the user identifier, as id
                  schema:
                    type: string
            responses:
                200:
                    description: The request has succeeded.
                    content:
                        application/json:
                            schema:
                                type: object
                                properties:
                                    data:
                                        $ref: "#/components/schemas/hcpProfile"
                                    errors:
                                        $ref: "#/components/schemas/errorBodyInSuccess"
                401:
                    description: User is not authenticated.
                404:
                    description: HCP user profile not found.
                    content:
                        applicaiton/json:
                            schema:
                                $ref: "#/components/schemas/errorResponse"
        put:
            tags:
                - hcp-profiles
            summary: Update HCP user's profile by id.
            parameters:
                - name: id
                  in: path
                  required: true
                  description: the user identifier, as id
                  schema:
                    type: string
            requestBody:
                required: false
                content:
                    application/json:
                        schema:
                            type: object
                            properties:
                                first_name:
                                    type: string
                                last_name:
                                    type: string
                                telephone:
                                    type: string
            responses:
                200:
                    description: The request has succeeded.
                    content:
                        applicaiton/json:
                            schema:
                                type: object
                                properties:
                                    data:
                                        $ref: "#/components/schemas/hcpProfile"
                                    errors:
                                        $ref: "#/components/schemas/errorBodyInSuccess"
                401:
                    description: User is not authenticated.
                404:
                    description: Hcp user profile not found.
                    content:
                        applicaiton/json:
                            schema:
                                $ref: "#/components/schemas/errorResponse"

    /api/hcp-profiles/specialties:
        get:
            tags:
                - hcp-profiles
            summary: Get specialties by locale.
            parameters:
                - name: locale
                  in: query
                  required: true
                  description: Case insensitive value in language_country format (e.g. nl_nl or en_nl)
                  schema:
                    type: string
            responses:
                200:
                    description: The request has succeeded.
                    content:
                        applicaiton/json:
                            schema:
                                type: object
                                properties:
                                    data:
                                        $ref: "#/components/schemas/specialtiesByLocale"
                                    errors:
                                        $ref: "#/components/schemas/errorBodyInSuccess"
                404:
                    description: Specialty not found for country.
                    content:
                        applicaiton/json:
                            schema:
                                $ref: "#/components/schemas/errorResponse"
                400:
                    description: Invalid request.
                    content:
                        applicaiton/json:
                            schema:
                                $ref: "#/components/schemas/errorResponse"
    /api/hcp-profiles/generate-token:
        post:
            tags:
                - hcp-profiles
            summary: Generate access token for hcp users on hcp portal.
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            type: object
                            properties:
                                email:
                                    type: string
                                password:
                                    type: string
                            required:
                              - email
                              - password
            responses:
                200:
                    description: The request has succeeded.
                    content:
                        applicaiton/json:
                            schema:
                                type: object
                                properties:
                                    data:
                                        type: object
                                        properties:
                                            uuid:
                                                type: string
                                            email:
                                                type: string
                                            access_token:
                                                type: string
                                            retention_period:
                                                type: string
                                    errors:
                                        type: array
                                        example: []
                400:
                    description: Invalid request.
                    content:
                        applicaiton/json:
                            schema:
                                $ref: "#/components/schemas/errorResponse"
                401:
                    description: Invalid email or password.
                    content:
                        applicaiton/json:
                            schema:
                                $ref: "#/components/schemas/errorResponse"

components:
    schemas:
        hcpProfile:
            type: object
            properties:
                id:
                    type: string
                uuid:
                    type: string
                salutation:
                    type: string
                first_name:
                    type: string
                last_name:
                    type: string
                email:
                    type: string
                country_iso2:
                    type: string
                specialty_onekey:
                    type: string
                status:
                    type: string
                telephone:
                    type: string
                birthdate:
                    type: string
                password_reset_token:
                    type: string
                language_code:
                    type: string
                locale:
                    type: string
                individual_id_onekey:
                    type: string
                origin_url:
                    type: string
        resetHcpPassword:
            type: object
            properties:
                new_password:
                    type: string
                confirm_password:
                    type: string
            required:
                - new_password
                - confirm_password
        changeHcpPassword:
            type: object
            properties:
                email:
                    type: string
                current_password:
                    type: string
                new_password:
                    type: string
                confirm_password:
                    type: string
            required:
              - email
              - current_password
              - new_password
              - confirm_password
        hcpConsent:
            type: object
            description: Key value pair of consent id and answer
            example: { "unique_slug": true }
        createHcpProfile:
            type: object
            properties:
                salutation:
                    type: string
                first_name:
                    type: string
                last_name:
                    type: string
                uuid:
                    type: string
                email:
                    type: string
                telephone:
                    type: string
                country_iso2:
                    type: string
                language_code:
                    type: string
                locale:
                    type: string
                specialty_onekey:
                    type: string
                origin_url:
                    type: string
                consents:
                    type: array
                    items:
                        $ref: "#/components/schemas/hcpConsent"
            required:
              - first_name
              - last_name
              - uuid
              - email
              - salutation
              - country_iso2
              - language_code
              - locale
              - specialty_onekey
              - origin_url
        confirmConsent:
            type: object
            properties:
                token:
                    type: string
            required:
              - token
        hcpProfileWithToken:
            type: object
            properties:
                id:
                    type: string
                uuid:
                    type: string
                salutation:
                    type: string
                first_name:
                    type: string
                last_name:
                    type: string
                email:
                    type: string
                country_iso2:
                    type: string
                specialty_onekey:
                    type: string
                status:
                    type: string
                password_reset_token:
                    type: string
                retention_period:
                    type: string
        specialty:
            type: object
            properties:
                codbase:
                    type: string
                cod_id_onekey:
                    type: string
                cod_locale:
                    type: string
                cod_description:
                    type: string
        specialtiesByLocale:
            type: array
            items:
                $ref: "#/components/schemas/specialty"
